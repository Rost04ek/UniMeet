{% extends "base.html" %}

{% block title %}–ü—Ä–æ—Ñ—ñ–ª—å{% endblock %}

{% block content %}
<div class="container">
    <h1 style="text-align: center; margin-bottom: 1.5rem;">–ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å</h1>
    
    <div class="profile-card">
        <h2 style="margin-top: 0; margin-bottom: 1.5rem;">–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:</h2>
        <div class="profile-info">
            <div class="info-item">
                <strong>–Ü–º'—è:</strong> {{ user.full_name }}
            </div>
            <div class="info-item">
                <strong>Email:</strong> {{ user.email }}
            </div>
            <div class="info-item">
                <strong>–†–æ–ª—å:</strong> 
                {% if user.role == 'student' %}
                    –°—Ç—É–¥–µ–Ω—Ç
                {% elif user.role == 'organizer' %}
                    –û—Ä–≥–∞–Ω—ñ–∑–∞—Ç–æ—Ä
                {% elif user.role == 'admin' %}
                    –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä
                {% else %}
                    {{ user.role }}
                {% endif %}
            </div>
            {% if user.university %}
                <div class="info-item">
                    <strong>–£–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç:</strong> {{ user.university }}
                </div>
            {% endif %}
            <div class="info-item">
                <strong>–î–∞—Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó:</strong> {{ user.created_at.strftime('%d.%m.%Y') }}
            </div>
        </div>
    </div>
    
    <div class="registrations-section" style="margin-top: 2.5rem;">
        <h2>–ú–æ—ó —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –Ω–∞ –ø–æ–¥—ñ—ó ({{ registrations|length }})</h2>
        
        {% if registrations %}
            <div class="registrations-list">
                {% for reg in registrations %}
                    <div class="registration-card">
                        <div class="registration-header">
                            <h3>{{ reg.title }}</h3>
                            <span class="status-badge status-{{ reg.status }}">
                                {% if reg.status == 'registered' %}–ó–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π
                                {% elif reg.status == 'cancelled' %}–°–∫–∞—Å–æ–≤–∞–Ω–∏–π
                                {% elif reg.status == 'pending' %}–û—á—ñ–∫—É—î
                                {% else %}{{ reg.status }}
                                {% endif %}
                            </span>
                        </div>
                        <div class="registration-info">
                            <div>üìÖ {{ reg.event_date.strftime('%d.%m.%Y %H:%M') }}</div>
                            <div>üìç {{ reg.location }}</div>
                            <div>üìù –ó–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ: {{ reg.registration_date.strftime('%d.%m.%Y') }}</div>
                        </div>
                        <a href="{{ url_for('event_detail', event_id=reg.event_id) }}" class="btn btn-secondary">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø–æ–¥—ñ—é</a>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="text-center">–í–∏ —â–µ –Ω–µ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω—ñ –Ω–∞ –∂–æ–¥–Ω—É –ø–æ–¥—ñ—é</p>
            <div class="text-center">
                <a href="{{ url_for('events') }}" class="btn btn-primary">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø–æ–¥—ñ—ó</a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
